"use strict";var path=require("path"),webpack=require("webpack"),HtmlWebpackPlugin=require("html-webpack-plugin"),SpriteLoaderPlugin=require("svg-sprite-loader/plugin"),VueLoaderPlugin=require("vue-loader/lib/plugin"),MiniCssExtractPlugin=require("mini-css-extract-plugin"),OptimizeCSSAssetsPlugin=require("optimize-css-assets-webpack-plugin"),TerserPlugin=require("terser-webpack-plugin");module.exports=function(e,s){var i="production"===s.mode,n={test:/\.(p|post|)css$/,use:[i?MiniCssExtractPlugin.loader:"vue-style-loader","css-loader","postcss-loader"]},r={entry:{main:"./src/main.js",admin:"./src/admin/main.js"},output:{path:path.resolve(__dirname,"./dist"),filename:"[name].[hash].build.js",publicPath:i?"/ls_course3/":"",chunkFilename:"[chunkhash].js"},module:{rules:[n,{test:/\.vue$/,loader:"vue-loader"},{test:/\.js$/,loader:"babel-loader",exclude:/node_modules/,options:{presets:["@babel/preset-env"],plugins:["@babel/plugin-syntax-dynamic-import"]}},{test:/\.(png|jpe?g|gif|woff2?)$/i,loader:"file-loader",options:{name:"[hash].[ext]"}},{test:/\.svg$/,use:[{loader:"svg-sprite-loader",options:{extract:!0,spriteFilename:function(e){return"sprite".concat(e.substr(-4))}}},"svg-transform-loader",{loader:"svgo-loader",options:{plugins:[{removeTitle:!0},{removeAttrs:{attrs:"(fill|stroke)"}}]}}]},{test:/\.pug$/,oneOf:[{resourceQuery:/^\?vue/,use:["pug-plain-loader"]},{use:["pug-loader"]}]}]},resolve:{alias:{vue$:"vue/dist/vue.esm.js",images:path.resolve(__dirname,"src/images")},extensions:["*",".js",".vue",".json"]},devServer:{historyApiFallback:!0,noInfo:!1,overlay:!0},performance:{hints:!1},plugins:[new HtmlWebpackPlugin({template:"src/index.pug",chunks:["main"]}),new HtmlWebpackPlugin({template:"src/admin/index.pug",filename:"admin/index.html",chunks:["admin"]}),new SpriteLoaderPlugin({plainSprite:!0}),new VueLoaderPlugin],devtool:"#eval-source-map"};return i&&(r.devtool="none",r.plugins=(r.plugins||[]).concat([new webpack.DefinePlugin({"process.env":{NODE_ENV:'"production"'}}),new MiniCssExtractPlugin({filename:"[name].[contenthash].css",chunkFilename:"[contenthash].css"})]),r.optimization={},r.optimization.minimizer=[new TerserPlugin({cache:!0,parallel:!0,sourceMap:!1}),new OptimizeCSSAssetsPlugin({})]),r};